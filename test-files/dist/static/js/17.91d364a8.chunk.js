(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1036:function(e,t,a){},1144:function(e,t,a){"use strict";a.r(t);a(423);var r=a(160),n=(a(282),a(136)),s=(a(1033),a(1134)),l=(a(212),a(53)),i=(a(89),a(14)),o=(a(421),a(280)),c=a(15),u=a(16),d=a(17),h=a(13),m=a(18),p=(a(992),a(1005)),g=(a(134),a(48)),f=a(0),I=a.n(f),y=a(41),b=(a(1036),a(108)),v=g.a.Column,E=(p.a.TreeNode,function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={roleListOrigin:[],pageSize:30,currentPage:1,total:0,userList:[{roleId:"2",roleName:"\u7ba1\u7406\u7528\u6237",roleDesc:"\u7ba1\u7406\u7528\u6237",createDate:"2018-11-15",updateDate:"2018-11-15",remark:null},{roleId:"1",roleName:"\u4e1a\u52a1\u7528\u6237",roleDesc:"\u4e1a\u52a1\u7528\u6237",createDate:"2018-11-15",updateDate:"2018-11-15",remark:null},{roleId:"3",roleName:"\u5ba1\u6838\u7528\u6237",roleDesc:"\u5ba1\u6838\u7528\u6237",createDate:"2018-11-15",updateDate:"2018-11-15",remark:null}],userApplied:[],modalVisible:!1,targetKeys:[],targetUserId:""},a.handleChange=function(e){a.setState({targetKeys:e})},a.filterOption=function(e,t){return t.roleName.indexOf(e)>-1||t.roleDesc.indexOf(e)>-1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getUserList(),this.getRoleList()}},{key:"getRoleList",value:function(){var e=this;y.c.roleList().then(function(t){console.log(t),1===t.res&&e.setState({roleListOrigin:t.obj.roleInfos})})}},{key:"getUserList",value:function(){var e=this;y.c.roleUserListAll({currentPage:this.state.currentPage,pageSize:this.state.pageSize}).then(function(t){1===t.res&&(e.setState({userApplied:t.obj.userRoles}),e.setState({targetKeys:e.state.userApplied.map(function(e){return e.roleId})}))})}},{key:"modalBtnSure",value:function(){var e=this;console.log("\u8d44\u6e90sure",this.state.targetKeys),y.c.addUser({userId:this.state.targetUserId,roleId:this.state.targetKeys}).then(function(t){1===t.res?(o.a.success("\u6dfb\u52a0\u6210\u529f"),e.getUserList()):o.a.error("\u6dfb\u52a0\u5931\u8d25")}),this.setModalVisible(!1)}},{key:"setModalVisible",value:function(e){this.setState({modalVisible:e})}},{key:"setTarget",value:function(e){this.setState({targetKeys:null==e.roleId?[]:e.roleId.split(",")}),this.setState({targetUserId:e.userId})}},{key:"render",value:function(){var e=this;return I.a.createElement("div",{className:"father-height"},I.a.createElement(l.a,{separator:">"},I.a.createElement(i.a,{type:"pushpin"}),I.a.createElement(l.a.Item,null,"\u6743\u9650\u8bbe\u7f6e"),I.a.createElement(l.a.Item,null,"\u6743\u9650\u7ba1\u7406")),I.a.createElement("div",{className:"content-box"},I.a.createElement(b.a,{title:"\u6743\u9650\u7ba1\u7406"},I.a.createElement(g.a,{bordered:!0,rowKey:"userId",dataSource:this.state.userApplied},I.a.createElement(v,{title:"\u7528\u6237ID",dataIndex:"userId"}),I.a.createElement(v,{title:"\u7528\u6237\u540d",dataIndex:"userName"}),I.a.createElement(v,{title:"\u89d2\u8272",dataIndex:"roleName"}),I.a.createElement(v,{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updateDate"}),I.a.createElement(v,{title:"\u64cd\u4f5c",render:function(t){return I.a.createElement("span",{onClick:function(){e.setModalVisible(!0),e.setTarget(t)},style:{color:"blue"},className:"pointer-icon"},"\u5206\u914d\u6743\u9650")}})))),I.a.createElement(n.a,{title:"\u89d2\u8272\u9009\u6846",visible:this.state.modalVisible,onOk:function(){e.modalBtnSure()},onCancel:function(){e.setModalVisible(!1)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},I.a.createElement(s.a,{rowKey:function(e){return e.roleId},dataSource:this.state.roleListOrigin,showSearch:!0,filterOption:this.filterOption,targetKeys:this.state.targetKeys,onChange:this.handleChange,render:function(e){return e.roleName}})))}}]),t}(f.Component));t.default=r.a.create()(E)}}]);
//# sourceMappingURL=17.91d364a8.chunk.js.map