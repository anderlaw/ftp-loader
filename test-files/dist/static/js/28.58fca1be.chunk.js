(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1114:function(e,t,a){},1159:function(e,t,a){"use strict";a.r(t);a(109);var n=a(42),l=(a(133),a(91)),c=(a(987),a(990)),r=(a(285),a(71)),s=(a(212),a(53)),u=(a(89),a(14)),i=a(118),o=a(70),m=a(15),d=a(16),h=a(17),f=a(13),y=a(18),p=(a(422),a(135)),E=a(0),v=a.n(E),g=a(108),k=(a(1114),a(41)),b=a(213),C=a.n(b),w=a(283),N=a(275),D=function(e){return{flumeConfig:e.flumeConfig_reducer}},_=function(e){var t={},a=function(a){t["update_"+a]=function(t){return e({type:a,value:t})}};for(var n in N.a)a(n);return t},T=function(e){return Object(w.b)(D,_)(e)},O=p.a.Option,S=(T(function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return v.a.createElement("div",null,v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65b9\u5f0f"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.props.flumeConfig.flumeConfig_collectWay,onChange:function(t){return e.props.update_flumeConfig_collectWay(t)}},v.a.createElement(O,{value:"total"},"\u5168\u91cf"),v.a.createElement(O,{value:"increment"},"\u589e\u91cf")))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65e5"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.props.flumeConfig.flumeConfig_collectDay,onChange:function(t){return e.props.update_flumeConfig_collectDay(t)}},v.a.createElement(O,{value:"trade"},"\u4ea4\u6613\u65e5"),v.a.createElement(O,{value:"nature"},"\u81ea\u7136\u65e5")))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65f6\u6bb5"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(c.a,{onChange:function(t){e.props.update_flumeConfig_collectBegin(t.format("HH:mm"))},format:"HH:mm",value:C()(this.props.flumeConfig.flumeConfig_collectBegin,"HH:mm")}),"-",v.a.createElement(c.a,{onChange:function(t){e.props.update_flumeConfig_collectEnd(t.format("HH:mm"))},format:"HH:mm",value:C()(this.props.flumeConfig.flumeConfig_collectEnd,"HH:mm")}))))))}}]),t}(E.Component)),p.a.Option),j=(T(function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(l)))).state={initYet:!1,type:""},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"switchType",value:function(e){this.setState({type:e})}},{key:"componentDidUpdate",value:function(){this.state.initYet||this.setState({initYet:!0,type:Object.keys(this.props.info)[0]})}},{key:"render",value:function(){var e=this;return v.a.createElement("div",null,v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"Type"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.type,onChange:function(t){return e.switchType(t)}},v.a.createElement(S,{value:"SQLSource"},"SQLSource"),v.a.createElement(S,{value:"Tail"},"Tail")))),this.props.info[this.state.type].map(),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u67e5\u8be2SQL"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:this.props.flumeConfig.flumeConfig_querySql,onChange:function(t){return e.props.update_flumeConfig_querySql(t.target.value)}}))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u6700\u5927\u4e0b\u53d1"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:this.props.flumeConfig.flumeConfig_maxRows,onChange:function(t){return e.props.update_flumeConfig_maxRows(t.target.value)}}))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u7d22\u5f15\u5b57\u6bb5\u521d\u59cb\u503c"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:this.props.flumeConfig.flumeConfig_startFrom,onChange:function(t){return e.props.update_flumeConfig_startFrom(t.target.value)}}))))))}}]),t}(E.Component)),E.Component,E.Component,p.a.Option),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={radioValue:"base",flumeIns:"",flumeList:[],base:{collectWay:"increment",collectDay:"nature",collectBeginTime:"0:00",collectEndTime:"23:59",collectDelay:5,collectFrequency:50},sourceType:"",sourceData:{},channelType:"",channelData:{},sinkType:"",sinkData:{},clusterList:[],topicList:[]},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFlumeInsList(),this.getFlumeSource(),this.getFlumeChannel(),this.getFlumeSink(),this.getClusterList()}},{key:"getFlumeInsList",value:function(){var e=this;k.a.flumeInsList().then(function(t){1===t.res&&e.setState({flumeList:t.obj})})}},{key:"getFlumeSource",value:function(){var e=this;k.a.flumeConfigSource().then(function(t){1===t.res&&e.configData("source",t.obj)})}},{key:"getFlumeChannel",value:function(){var e=this;k.a.flumeConfigChannel().then(function(t){1===t.res&&e.configData("channel",t.obj)})}},{key:"getFlumeSink",value:function(){var e=this;k.a.flumeConfigSink().then(function(t){1===t.res&&e.configData("sink",t.obj)})}},{key:"getClusterList",value:function(){var e=this;k.a.flumeClusterList().then(function(t){1===t.res&&e.setState({clusterList:t.obj})})}},{key:"getTopicList",value:function(e){var t=this;k.a.flumeTopicList({cluster_name:e}).then(function(e){1===e.res&&1===e.res&&t.setState({topicList:e.obj})})}},{key:"configData",value:function(e,t){var a,n=Object.keys(t)[0],l=e+"Type",c=e+"Data";this.setState((a={},Object(o.a)(a,l,n),Object(o.a)(a,c,t),a))}},{key:"handleRadioChange",value:function(e){this.setState({radioValue:e.target.value})}},{key:"update_baseKey",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.base));a[e]=t,this.setState({base:a})}},{key:"updateDataType",value:function(e,t){var a=e+"Type";this.setState(Object(o.a)({},a,t))}},{key:"updateDataKey",value:function(e,t,a,n){var l=e+"Data",c=this.state[l],r=this.state[e+"Type"],s=JSON.parse(JSON.stringify(c));s[r].find(function(e){return e.key===t}).value=a,this.setState(Object(o.a)({},l,s),function(){n&&n()})}},{key:"handleFlumeChange",value:function(e){this.setState({flumeIns:e})}},{key:"handleClusterChange",value:function(e,t){var a=this;this.updateDataKey("sink",e,t,function(){a.updateDataKey("sink","topic",""),a.getTopicList(t)})}},{key:"submitConfig",value:function(){var e=this,t={base:Object(i.a)({},this.state.base,this.state.flumeList.find(function(t){return t.table_code==e.state.flumeIns})),source:{sourceType:this.state.sourceType,sourceData:this.state.sourceData},channel:{channelType:this.state.channelType,channelData:this.state.channelData},sink:{sinkType:this.state.sinkType,sinkData:this.state.sinkData}};k.a.flumeGenerateAgent(t)}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{className:"father-height"},v.a.createElement(s.a,{separator:">"},v.a.createElement(u.a,{type:"pushpin"}),v.a.createElement(s.a.Item,null,"\u914d\u7f6e\u7ba1\u7406"),v.a.createElement(s.a.Item,null,"Flume\u914d\u7f6e\u7ba1\u7406"),v.a.createElement(s.a.Item,null,"Conf\u914d\u7f6e")),v.a.createElement("div",{className:"content-box"},v.a.createElement(g.a,{title:"conf\u914d\u7f6e"},v.a.createElement("div",{className:"father-height",style:{width:"64%",margin:"0 auto"}},v.a.createElement("div",null,v.a.createElement("span",{style:{display:"inline-block",width:"15%"},title:"\u4e0b\u62c9\u6846\u9009\u62e9\u5b9e\u4f8b"},v.a.createElement(u.a,{type:"question-circle"}),"Flume\u5b9e\u4f8b:"),v.a.createElement(p.a,{showSearch:!0,style:{width:"84%"},placeholder:"Select",optionFilterProp:"children",value:this.state.flumeIns,onChange:function(t){return e.handleFlumeChange(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.flumeList.map(function(e,t){return v.a.createElement(j,{key:t,value:e.table_code},e.table_name,"-",e.table_desc)}))),v.a.createElement("div",{style:{borderBottom:"1px solid #d4d7e1",margin:"10px 0"}}),v.a.createElement("div",{className:"radio-group"},v.a.createElement(r.a.Group,{onChange:function(t){return e.handleRadioChange(t)},value:this.state.radioValue,buttonStyle:"solid"},v.a.createElement(r.a.Button,{value:"base"},"\u57fa\u672c\u5c5e\u6027"),v.a.createElement(r.a.Button,{value:"source"},"Source\u5c5e\u6027"),v.a.createElement(r.a.Button,{value:"channel"},"Channel\u5c5e\u6027"),v.a.createElement(r.a.Button,{value:"sink"},"Sink\u5c5e\u6027"))),v.a.createElement("div",{className:"father-height scroll-y","data-space":"139px"},"base"===this.state.radioValue?v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65b9\u5f0f"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.base.collectWay,onChange:function(t){return e.update_baseKey("collectWay",t)}},v.a.createElement(j,{value:"total"},"\u5168\u91cf"),v.a.createElement(j,{value:"increment"},"\u589e\u91cf")))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65e5"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.base.collectDay,onChange:function(t){return e.update_baseKey("collectDay",t)}},v.a.createElement(j,{value:"trade"},"\u4ea4\u6613\u65e5"),v.a.createElement(j,{value:"nature"},"\u81ea\u7136\u65e5")))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u65f6\u6bb5"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(c.a,{onChange:function(t){e.update_baseKey("collectBeginTime",t.format("HH:mm"))},format:"HH:mm",value:C()(this.state.base.collectBeginTime,"HH:mm")}),"-",v.a.createElement(c.a,{onChange:function(t){e.update_baseKey("collectEndTime",t.format("HH:mm"))},format:"HH:mm",value:C()(this.state.base.collectEndTime,"HH:mm")}))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u9891\u7387"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:this.state.base.collectFrequency,onChange:function(t){return e.update_baseKey("collectFrequency",t.target.value)}}))),v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"\u91c7\u96c6\u5ef6\u65f6"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:this.state.base.collectDelay,onChange:function(t){return e.update_baseKey("collectDelay",t.target.value)}}))))):"","source"===this.state.radioValue?v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"Type"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.sourceType,onChange:function(t){return e.updateDataType("source",t)}},Object.keys(this.state.sourceData).map(function(e){return v.a.createElement(j,{key:e,value:e},e)})))),this.state.sourceData[this.state.sourceType].map(function(t,a){return v.a.createElement("tr",{key:a},v.a.createElement("td",{className:"key-td",width:"20%"},t.label),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:t.value,onChange:function(a){return e.updateDataKey("source",t.key,a.target.value)}})))}))):"","channel"===this.state.radioValue?v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"Type"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.channelType,onChange:function(t){return e.updateDataType("channel",t)}},Object.keys(this.state.channelData).map(function(e){return v.a.createElement(j,{key:e,value:e},e)})))),this.state.channelData[this.state.channelType].map(function(t,a){return v.a.createElement("tr",{key:a},v.a.createElement("td",{className:"key-td",width:"20%"},t.label),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(l.a,{style:{width:"60%"},value:t.value,onChange:function(a){return e.updateDataKey("channel",t.key,a.target.value)}})))}))):"","sink"===this.state.radioValue?v.a.createElement("table",null,v.a.createElement("tbody",null,v.a.createElement("tr",null,v.a.createElement("td",{className:"key-td",width:"20%"},"Type"),v.a.createElement("td",{className:"value-td",width:"80%"},v.a.createElement(p.a,{style:{width:"60%"},value:this.state.sinkType,onChange:function(t){return e.updateDataType("sink",t)}},Object.keys(this.state.sinkData).map(function(e){return v.a.createElement(j,{key:e,value:e},e)})))),this.state.sinkData[this.state.sinkType].map(function(t,a){return v.a.createElement("tr",{key:a},v.a.createElement("td",{className:"key-td",width:"20%"},t.label),v.a.createElement("td",{className:"value-td",width:"80%"},"kafka_cluster"===t.key?v.a.createElement(p.a,{style:{width:"60%"},value:t.value,onChange:function(a){return e.handleClusterChange(t.key,a)}},e.state.clusterList.map(function(e){return v.a.createElement(j,{key:e.cluster_name,value:e.cluster_name},e.cluster_desc)})):"topic"===t.key?v.a.createElement(p.a,{style:{width:"60%"},value:t.value,onChange:function(a){return e.updateDataKey("sink",t.key,a)}},e.state.topicList.map(function(e){return v.a.createElement(j,{key:e.topic_code,value:e.topic_code},e.topic_name)})):v.a.createElement(l.a,{style:{width:"60%"},value:t.value,onChange:function(a){return e.updateDataKey("sink",t.key,a.target.value)}})))}))):""),v.a.createElement("div",{style:{marginTop:"20px",textAlign:"center"}},v.a.createElement(n.a,{className:"gradient-btn gap-btn",icon:"search"},"\u6821\u9a8c"),v.a.createElement(n.a,{className:"gradient-btn gap-btn",icon:"search"},"\u7f16\u8f91"),v.a.createElement(n.a,{onClick:function(){return e.submitConfig()},className:"gradient-btn gap-btn",icon:"search"},"\u4fdd\u5b58"),v.a.createElement(n.a,{className:"gap-btn",icon:"search"},"\u53d6\u6d88"))))))}}]),t}(E.Component);t.default=H}}]);
//# sourceMappingURL=28.58fca1be.chunk.js.map